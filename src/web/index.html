<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MILES Research Chat</title>
  <link rel="stylesheet" href="/ui/styles.css" />
</head>

<body>
  <main class="app-shell">
    <section class="hero">
      <div>
        <h1>MILES – Multimodal Intelligent Assistant</h1>
        <p class="tagline">
          Chat with the orchestration layer and watch how tasks flow to the specialist
          workers (RAG, 3D generation, etc.).
        </p>
      </div>
      <div class="status">
        <span class="dot"></span>
        <span>FastAPI · Celery · Redis · Gemini</span>
      </div>
    </section>

    <section class="chat-card">
      <form id="chat-form">
        <label for="prompt-input">Enter your research / generation prompt</label>
        <div class="input-row">
          <textarea id="prompt-input" placeholder="e.g. Research holographic gesture capture pipelines."></textarea>
          <button type="submit">Send</button>
        </div>
      </form>

      <div id="messages" class="messages" aria-live="polite"></div>
    </section>

    <section class="dashboard">
      <div class="panel">
        <h2>Orchestrator Plan (Chain-of-Thought)</h2>
        <ul id="plan-list"></ul>
      </div>
      <div class="panel">
        <h2>Worker Tasks</h2>
        <div id="tasks-list" class="tasks"></div>
      </div>
    </section>
  </main>

  <template id="message-template">
    <article class="message">
      <header>
        <strong class="sender"></strong>
        <span class="timestamp"></span>
      </header>
      <p class="body"></p>
    </article>
  </template>

  <template id="task-template">
    <div class="task">
      <div>
        <h3 class="task-worker"></h3>
        <p class="task-prompt"></p>
      </div>
      <div class="task-status"></div>
    </div>
  </template>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="/ui/app.js?v=debug2" defer></script>
  <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
</body>

</html>